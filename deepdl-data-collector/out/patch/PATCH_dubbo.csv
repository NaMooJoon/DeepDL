Project,fix-commit,fix-shortMessage,fix-date,fix-author,patch
dubbo,f09ee2c65847b4aa56ccf3888c6dc7289d5e5d44,"DUBBO-44 修改订阅时与1.0 url无path时的兼容。

git-svn-id: http://code.alibabatech.com/svn/dubbo/trunk@222 1a56cb94-b969-4eaa-88fa-be21384802f2
",2011-11-09 12:56:14,tony.chenl,"diff --git a/dubbo-registry/src/main/java/com/alibaba/dubbo/registry/support/RegistryDirectory.java b/dubbo-registry/src/main/java/com/alibaba/dubbo/registry/support/RegistryDirectory.java
index 622182e..b867331 100644
--- a/dubbo-registry/src/main/java/com/alibaba/dubbo/registry/support/RegistryDirectory.java
+++ b/dubbo-registry/src/main/java/com/alibaba/dubbo/registry/support/RegistryDirectory.java
@@ -236,7 +236,8 @@
                 try {
                     if ((url.getPath() == null || url.getPath().length() == 0)
                             && ""dubbo"".equals(url.getProtocol())) { // 兼容1.0
-                        String path = directoryUrl.getPath();
+                        //fix by tony.chenl DUBBO-44
+                        String path = directoryUrl.getParameter(Constants.INTERFACE_KEY);
                         int i = path.indexOf('/');
                         if (i >= 0) {
                             path = path.substring(i + 1);
"
